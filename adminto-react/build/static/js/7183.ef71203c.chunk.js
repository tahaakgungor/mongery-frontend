"use strict";(self.webpackChunkadminto_react=self.webpackChunkadminto_react||[]).push([[7183],{48694:function(n,e,t){t.d(e,{g:function(){return s}});var r=t(43144),a=t(15671),s=(0,r.Z)((function n(){(0,a.Z)(this,n)}));s.link=" http://45.155.124.180:5050/",s.API=s.link+"api",s.login=s.link+"auth/login",s.register=s.link+"auth/register",s.verify=s.link+"auth/verify"},17183:function(n,e,t){t.r(e),t.d(e,{default:function(){return N}});var r=t(1413),a=t(15861),s=t(93433),c=t(29439),i=t(64687),d=t.n(i),o=t(11087),u=t(89743),l=t(2677),p=t(9140),m=t(8396),h=t(12576),x=t(45736),f=t(43360),v=t(95316),j=t(68613),y=t(18185),Z=t(72791),g=t(51649),b=t(67315),A=t(48694),k=function(){var n=(0,a.Z)(d().mark((function n(e){var t,r;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,"\n        query {\n            states {\n              id\n              name\n              createdAt\n              updatedAt\n            }\n          }\n    ",n.next=4,fetch(A.g.API,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({query:"\n        query {\n            states {\n              id\n              name\n              createdAt\n              updatedAt\n            }\n          }\n    "})});case 4:return t=n.sent,n.next=7,t.json();case 7:if(!(r=n.sent).errors){n.next=10;break}throw new Error(r.errors[0].message);case 10:return n.abrupt("return",r.data.states);case 13:n.prev=13,n.t0=n.catch(0),console.log(n.t0);case 16:case"end":return n.stop()}}),n,null,[[0,13]])})));return function(e){return n.apply(this,arguments)}}(),I=t(80184),N=function(){(0,g.Tt)({title:"Siparisler",breadCrumbItems:[{path:"apps/siparisler",label:"Apps"},{path:"apps/siparisler",label:"Siparisler",active:!0}]}),(0,Z.useEffect)((function(){M(),Q()}),[]);var n=localStorage.getItem("token")||"",e=(0,Z.useState)([]),t=(0,c.Z)(e,2),i=t[0],A=t[1],N=(0,Z.useState)([]),w=(0,c.Z)(N,2),O=w[0],S=w[1],T=(0,Z.useState)(!1),C=(0,c.Z)(T,2),q=C[0],B=C[1],$=(0,Z.useState)(null),P=(0,c.Z)($,2),z=P[0],E=P[1],J=(0,Z.useState)([]),D=(0,c.Z)(J,2),U=D[0],F=D[1],L=(0,Z.useState)(null),H=(0,c.Z)(L,2),K=(H[0],H[1]),R=(0,Z.useState)(null),X=(0,c.Z)(R,2),_=X[0],Y=X[1],G=function(){return B(!1)},M=function(){var e=(0,a.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,b.wJ)(n);case 3:t=e.sent,console.log(t),A(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=(0,a.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k(n);case 3:t=e.sent,console.log(t),S(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=(0,a.Z)(d().mark((function e(t,a){var s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==a){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,console.log(t,a),e.next=6,(0,b.qS)(t,a,n);case 6:s=e.sent,c=i.map((function(n){return n.id===t?(0,r.Z)((0,r.Z)({},n),{},{state:{id:a,name:s.state.name,createdAt:s.state.createdAt,updatedAt:s.state.updatedAt}}):n})),A(c),G(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(n,t){return e.apply(this,arguments)}}(),W=function(){var e=(0,a.Z)(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,b.XI)(t,n);case 3:r=i.filter((function(n){return n.id!==t})),A(r),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}();return(0,I.jsx)(u.Z,{children:(0,I.jsx)(l.Z,{children:(0,I.jsx)(p.Z,{children:(0,I.jsxs)(p.Z.Body,{children:[(0,I.jsx)("div",{className:"table-responsive",children:(0,I.jsxs)("table",{className:"table table-centered table-nowrap table-hover mb-0",children:[(0,I.jsx)("thead",{className:"table-light",children:(0,I.jsxs)("tr",{children:[(0,I.jsx)("th",{style:{width:"20px"},children:(0,I.jsxs)("div",{className:"form-check font-size-16",children:[(0,I.jsx)("input",{type:"checkbox",className:"form-check-input",id:"customCheck1"}),(0,I.jsx)("label",{className:"form-check-label",htmlFor:"customCheck1",children:"\xa0"})]})}),(0,I.jsx)("th",{children:"Firma"}),(0,I.jsx)("th",{children:"Toplam"}),(0,I.jsx)("th",{children:"Durum"}),(0,I.jsx)("th",{children:"\u0130\u015flem"})]})}),(0,I.jsxs)("tbody",{children:[i.sort((function(n,e){return n.id-e.id})).map((function(n){return(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{children:(0,I.jsxs)("div",{className:"form-check font-size-16",children:[(0,I.jsx)("input",{type:"checkbox",className:"form-check-input",id:"customCheck".concat(n.id)}),(0,I.jsx)("label",{className:"form-check-label",htmlFor:"customCheck".concat(n.id),children:"\xa0"})]})}),(0,I.jsxs)("td",{children:[(0,I.jsx)("h5",{className:"font-size-14 mb-1",children:(0,I.jsx)(o.rU,{to:"#",className:"text-dark",children:n.customer.firmName})}),(0,I.jsx)("p",{className:"text-muted mb-0",children:n.shortDesc})]}),(0,I.jsxs)("td",{children:[n.products.reduce((function(n,e){return n+e.quantity*e.product.price*1.2}),0)," ","TL"]}),(0,I.jsxs)("td",{children:["Onayland\u0131"===n.state.name&&(0,I.jsx)(m.Z,{placement:"top",overlay:(0,I.jsx)(h.Z,{children:n.state.name}),children:(0,I.jsx)(x.Z,{bg:"warning",children:n.state.name})}),"Haz\u0131rlan\u0131yor"===n.state.name&&(0,I.jsx)(m.Z,{placement:"top",overlay:(0,I.jsx)(h.Z,{children:n.state.name}),children:(0,I.jsx)(x.Z,{bg:"info",children:n.state.name})}),"Yolda"===n.state.name&&(0,I.jsx)(m.Z,{placement:"top",overlay:(0,I.jsx)(h.Z,{children:n.state.name}),children:(0,I.jsx)(x.Z,{bg:"success",children:n.state.name})}),"Tamamland\u0131"===n.state.name&&(0,I.jsx)(m.Z,{placement:"top",overlay:(0,I.jsx)(h.Z,{children:n.state.name}),children:(0,I.jsx)(x.Z,{bg:"danger",children:n.state.name})})]}),(0,I.jsxs)("td",{children:[(0,I.jsx)(f.Z,{variant:"success",className:"btn-sm",onClick:function(){return e=n,void F((function(n){return[].concat((0,s.Z)(n),[e])}));var e},children:(0,I.jsx)("i",{className:"fas fa-file-invoice"})}),(0,I.jsx)(f.Z,{style:{marginLeft:"5px"},variant:"primary",className:"btn-sm",onClick:function(){return e=n,console.log("Sipari\u015fi onayla:",e),K(e),B(!0),void Y(e.id);var e},children:(0,I.jsx)("i",{className:"fas fa-edit"})}),(0,I.jsx)(f.Z,{style:{marginLeft:"5px"},variant:"danger",className:"btn-sm",onClick:function(){return W(n.id)},children:(0,I.jsx)("i",{className:"fas fa-trash"})})]})]},n.id)})),U.length>0&&(0,I.jsx)("tr",{children:(0,I.jsx)("td",{colSpan:5,children:(0,I.jsx)("div",{className:"text-end",children:(0,I.jsx)(f.Z,{variant:"danger",className:"btn-sm",onClick:function(){return F([])},children:(0,I.jsx)(y.pZ2,{})})})})})]})]})}),i.map((function(n){return(0,I.jsxs)(v.Z,{show:q,onHide:G,children:[(0,I.jsx)(v.Z.Header,{closeButton:!0,children:(0,I.jsx)(v.Z.Title,{children:"Siparis Detaylar\u0131"})}),(0,I.jsxs)(v.Z.Body,{children:[(0,I.jsxs)(u.Z,{children:[(0,I.jsx)(l.Z,{md:6,children:(0,I.jsx)(p.Z,{children:(0,I.jsxs)(p.Z.Body,{children:[(0,I.jsx)(p.Z.Title,{children:"\xdcr\xfcn Detaylar\u0131"}),n.products.map((function(n){return(0,I.jsxs)(p.Z.Text,{children:[(0,I.jsx)("strong",{children:"\xdcr\xfcn:"})," ",n.product.title," -"," ",n.product.price," TL"]})}))]})})}),(0,I.jsx)(l.Z,{md:6,children:(0,I.jsx)(p.Z,{children:(0,I.jsxs)(p.Z.Body,{children:[(0,I.jsx)(p.Z.Title,{children:"Adres Bilgileri"}),(0,I.jsxs)(p.Z.Text,{children:[(0,I.jsx)("strong",{children:"Adres:"})," ",n.customer.address]}),(0,I.jsxs)(p.Z.Text,{children:[(0,I.jsx)("strong",{children:"Telefon:"})," ",n.customer.phone]}),(0,I.jsxs)(p.Z.Text,{children:[(0,I.jsx)("strong",{children:"Email:"})," ",n.customer.email]})]})})}),(0,I.jsxs)(p.Z.Text,{children:[(0,I.jsx)("strong",{children:"Siparis Tarihi:"})," ",n.createdAt]})]}),(0,I.jsx)(u.Z,{children:(0,I.jsx)(l.Z,{md:12,children:(0,I.jsx)(p.Z,{children:(0,I.jsxs)(p.Z.Body,{children:[(0,I.jsx)(p.Z.Title,{children:"Siparis Durumu"}),(0,I.jsxs)(j.Z,{"aria-label":"Default select example",onChange:function(n){return E(Number(n.target.value))},children:[(0,I.jsx)("option",{children:"Se\xe7iniz"}),O.map((function(n){return(0,I.jsx)("option",{value:n.id,children:n.name})}))]})]})})})})]}),(0,I.jsxs)(v.Z.Footer,{children:[(0,I.jsx)(f.Z,{variant:"secondary",onClick:G,children:"Kapat"}),(0,I.jsx)(f.Z,{variant:"primary",disabled:null===z,onClick:function(){return V(_,Number(z))},children:"Kaydet"})]})]})}))]})})})})}},67315:function(n,e,t){t.d(e,{bx:function(){return i},wJ:function(){return d},qS:function(){return o},XI:function(){return u}});var r=t(15861),a=t(64687),s=t.n(a),c=t(48694),i=function(){var n=(0,r.Z)(s().mark((function n(e,t){var r,a,i,d;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=localStorage.getItem("customerId"),console.log(e),a={input:{stateId:1,variant:"danger",products:e.products.map((function(n){return{productId:n.products.id,quantity:n.quantity}})),customerId:Number(r)}},console.log(a),n.prev=4,"\n        mutation CreateOrder($input: CreateOrderInput!) {\n            createOrder(createOrderInput: $input) {\n              id\n              state{\n                id\n                name\n                createdAt\n                updatedAt\n              }\n              variant\n              customer{\n                id\n                name\n                email\n                phone\n                address\n                firmName\n                avatar\n                description\n                address\n                createdAt\n                updatedAt\n              }\n              products {\n                  id\n                  orderId\n                  quantity\n                  productId\n              }\n              createdAt\n              updatedAt\n            }\n          }\n        ",n.next=8,fetch(c.g.API,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({query:"\n        mutation CreateOrder($input: CreateOrderInput!) {\n            createOrder(createOrderInput: $input) {\n              id\n              state{\n                id\n                name\n                createdAt\n                updatedAt\n              }\n              variant\n              customer{\n                id\n                name\n                email\n                phone\n                address\n                firmName\n                avatar\n                description\n                address\n                createdAt\n                updatedAt\n              }\n              products {\n                  id\n                  orderId\n                  quantity\n                  productId\n              }\n              createdAt\n              updatedAt\n            }\n          }\n        ",variables:a})});case 8:return i=n.sent,n.next=11,i.json();case 11:if(!(d=n.sent).errors){n.next=14;break}throw new Error(d.errors[0].message);case 14:return n.abrupt("return",d.data.createOrder);case 17:n.prev=17,n.t0=n.catch(4),console.log(n.t0);case 20:case"end":return n.stop()}}),n,null,[[4,17]])})));return function(e,t){return n.apply(this,arguments)}}(),d=function(){var n=(0,r.Z)(s().mark((function n(e){var t,r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,"\n        query {\n            orders {\n              id\n              customer {\n                  id\n                  name\n                  email\n                  firmName\n              }\n              state {\n                  id\n                  name\n              }\n              total\n              variant\n              products {\n                  orderId\n                  productId\n                  quantity\n                  product {\n                      price\n                      title\n                      createdAt\n                      updatedAt\n                      category {\n                          id\n                          name\n                      }\n                      customInputs {\n                          key\n                          value\n                      }\n                  }\n              }\n              invoice {\n                  fileName\n                  mimeType\n                  proforma\n              }\n              createdAt\n              updatedAt\n            }\n          }\n\n    ",n.next=4,fetch(c.g.API,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({query:"\n        query {\n            orders {\n              id\n              customer {\n                  id\n                  name\n                  email\n                  firmName\n              }\n              state {\n                  id\n                  name\n              }\n              total\n              variant\n              products {\n                  orderId\n                  productId\n                  quantity\n                  product {\n                      price\n                      title\n                      createdAt\n                      updatedAt\n                      category {\n                          id\n                          name\n                      }\n                      customInputs {\n                          key\n                          value\n                      }\n                  }\n              }\n              invoice {\n                  fileName\n                  mimeType\n                  proforma\n              }\n              createdAt\n              updatedAt\n            }\n          }\n\n    "})});case 4:return t=n.sent,n.next=7,t.json();case 7:if(!(r=n.sent).errors){n.next=10;break}throw new Error(r.errors[0].message);case 10:return n.abrupt("return",r.data.orders);case 13:n.prev=13,n.t0=n.catch(0),console.log(n.t0);case 16:case"end":return n.stop()}}),n,null,[[0,13]])})));return function(e){return n.apply(this,arguments)}}(),o=function(){var n=(0,r.Z)(s().mark((function n(e,t,r){var a,i;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,"\n        mutation UpdateOrder($input: UpdateOrderInput!) {\n          updateOrder(updateOrderInput: $input) {\n            id\n            state {\n              id\n              name\n              createdAt\n              updatedAt\n            }\n            variant\n            customer {\n              id\n              name\n              email\n              phone\n              address\n              firmName\n              avatar\n              description\n              address\n              createdAt\n              updatedAt\n            }\n            products {\n              id\n              orderId\n              quantity\n              productId\n            }\n            createdAt\n            updatedAt\n          }\n        }\n      ",n.next=4,fetch(c.g.API,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({query:"\n        mutation UpdateOrder($input: UpdateOrderInput!) {\n          updateOrder(updateOrderInput: $input) {\n            id\n            state {\n              id\n              name\n              createdAt\n              updatedAt\n            }\n            variant\n            customer {\n              id\n              name\n              email\n              phone\n              address\n              firmName\n              avatar\n              description\n              address\n              createdAt\n              updatedAt\n            }\n            products {\n              id\n              orderId\n              quantity\n              productId\n            }\n            createdAt\n            updatedAt\n          }\n        }\n      ",variables:{input:{id:e,stateId:t,variant:"danger"}}})});case 4:return a=n.sent,n.next=7,a.json();case 7:if(i=n.sent,console.log(i),!i.errors){n.next=11;break}throw new Error(i.errors[0].message);case 11:return n.abrupt("return",i.data.updateOrder);case 14:n.prev=14,n.t0=n.catch(0),console.log(n.t0);case 17:case"end":return n.stop()}}),n,null,[[0,14]])})));return function(e,t,r){return n.apply(this,arguments)}}(),u=function(){var n=(0,r.Z)(s().mark((function n(e,t){var r,a;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,"\n      mutation RemoveOrder($orderId: Int!) {\n        removeOrder(id: $orderId)\n      }\n      ",n.next=4,fetch(c.g.API,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({query:"\n      mutation RemoveOrder($orderId: Int!) {\n        removeOrder(id: $orderId)\n      }\n      ",variables:{orderId:e}})});case 4:return r=n.sent,n.next=7,r.json();case 7:if(a=n.sent,console.log(a),!a.errors){n.next=11;break}throw new Error(a.errors[0].message);case 11:return n.abrupt("return",a.data.removeOrder);case 14:n.prev=14,n.t0=n.catch(0),console.log(n.t0);case 17:case"end":return n.stop()}}),n,null,[[0,14]])})));return function(e,t){return n.apply(this,arguments)}}()}}]);
//# sourceMappingURL=7183.ef71203c.chunk.js.map